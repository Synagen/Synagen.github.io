{
  "hash": "c90e76ebdfed4fb5fc67dd21878a16eb",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Forecasting Caravan Park Visitors\"\nauthor: AgentRichi, AgentZizi\ndate: 2025-05-18\ncategories: [code, forecasting, timeseries]\nformat:\n  html:\n    toc: false\n    theme: flatly\n    code-fold: true\n---\n\n\n\n## Introduction\nThis report provides a forecasting methodology for caravan park visitors, applied to tourism in New South Wales (NSW), Australia. The forecasts are based on historical data from the <a href=\"https://www.tra.gov.au/en/international/international-visitor-survey-methodology\" target=\"_blank\">International Visitor Survey</a> (IVS), <a href=\"https://www.tra.gov.au/en/domestic/national-visitor-survey-methodology\" target=\"_blank\">National Visitor Survey</a> (NVS), and <a href=\"https://www.compassiot.com.au/\" target=\"_blank\">Compass IoT</a> connected vehicle trips.\nThe forecast includes the average daily number of visitors per campsite for each month from 2029 to 2040.\nNumbers for 2025-2028 are available directly from <a href=\"https://www.tra.gov.au/en/economic-analysis/tourism-forecasts/tourism-forecast-for-australia-2023-2028\" target=\"_blank\">Tourism Research Australia</a> (TRA) and are not forecasted,\nhowever the per-caravan site forecast can also be provided for these years if required.\n\n## Overview of Tourism Visitation Trends\n\nTourism visitation patterns for caravan parks across the Hawkesbury-Nepean Valley (HNV) were assessed through a multi-source data integration approach. This included:\n\n- Tourism Research Australia (TRA) Forecasts (2023–2028): These provided macro-level insights into visitor volumes, nights stayed, and expenditure at the state level, based on time-series econometric modelling and historical data from 2008 to 2022. Forecasts were adjusted for exogenous uncertainties such as post-COVID aviation recovery, macroeconomic shifts, and evolving consumer preferences.\n- Monthly Visitation Data: Granular monthly counts for individual caravan parks enabled improved temporal resolution and validation of seasonal variation.\n- Compass IoT Trip Data (2020–2024): High-resolution geospatial vehicle movement data was used to localize and disaggregate regional forecasts down to specific caravan parks.\n\nTo extend visitation projections beyond 2028 to 2041, Exponential Smoothing State Space Models (ETS) were applied to extrapolate long-term trends, and Seasonal-Trend decomposition using LOESS (STL) was used to model and retain seasonal dynamics. This ensured continuity and robustness in both trend and seasonal forecasting components.\n\n## Methodology: Data Refinement and Forecast Allocation\n\nTo downscale state-level tourism forecasts to site-specific estimates, the following methodology was applied:\n\n- Trip Disaggregation: Four years of Compass IoT trip data were used to compute visitation share ratios for each caravan park, based on observed trip counts during the baseline period (2020–2024). These static ratios were used to proportionally allocate aggregated TRA visitor forecasts to individual caravan park sites.\n- Seasonality Adjustment: STL decomposition outputs were calibrated with monthly visitation data to apply dynamic seasonal multipliers to daily forecasts, ensuring realistic intra-annual fluctuations.\n- Forecast Illustration: For example, Campsite ID 452 is projected to receive an average of 28 daily visitors in April 2035, rising to 46 in December 2035, driven by end-of-year holiday peaks.\n- Output Formats: Final visitation forecasts were exported in CSV and shapefile (.shp) formats, enabling spatial visualization and integration into GIS-based planning platforms.\n\n## Key Findings and Insights\n\n- Growth in Visitation: The integrated analysis indicates sustained growth in caravan park visitation across the HNV, in line with broader domestic tourism recovery trends.\n- Site-Specific Forecasts: Disaggregated daily forecasts provide park-level detail, supporting fine-grained operational, emergency, and resource planning.\n- Methodological Rigor: Data integration challenges were addressed using structured, replicable methodologies—particularly in catchment optimization, filtering logic, and seasonal calibration.\n\nTo demonstrate the practical application of our methodology, the following sections will walk through the R code used to generate these forecasts, starting with the overall NSW visitor nights.\n\n### Total NSW Visitor Nights (Domestic and International)\n\nThe initial step in our forecasting process involves loading historical tourism data and preparing it for time series analysis. This includes ensuring data types are correct and reshaping the data to be suitable for modeling. An Exponential Smoothing State Space Model (ETS) is then fitted to the annual visitor nights data. This model helps to project future visitor nights based on identified trends and patterns in the historical data. The resulting forecast, along with its decomposed components (like trend and level), is then visualized to assess the model's fit and understand the projections.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(fpp3)\nlibrary(DT)\n\n# load workspace\nload(\"tourism_forecast.RData\")\n\n# convert to integer\ntourism_fc$Nights_International <- as.integer(tourism_fc$Nights_International)\ntourism_fc$Nights_Domestic <- as.integer(tourism_fc$Nights_Domestic)\n\n# pivot to long format\ntourism_fc <- tourism_fc |>\n  pivot_longer(\n    cols = c(Nights_International, Nights_Domestic),\n    names_to = \"Type\", values_to = \"Nights\"\n  ) |>\n  mutate(Type = factor(Type,\n    levels = c(\"Nights_International\", \"Nights_Domestic\")\n  ))\n\n# convert to tsibble\ntourism_fc <- tourism_fc |>\n  as_tsibble(index = Year, key = Type)\n\n# simple ETS model\nfit <- tourism_fc |>\n  # filter(Year > 2021) |>\n  model(ETS(Nights ~ error(\"A\") + trend(\"Ad\", phi = 0.98) + season(\"N\")))\nreport(fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 10\n  Type              .model sigma2 log_lik   AIC  AICc   BIC    MSE   AMSE    MAE\n  <fct>             <chr>   <dbl>   <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl>  <dbl>\n1 Nights_Internati… \"ETS(… 1.24e9   -249.  508.  512.  513. 9.46e8 2.52e9 15826.\n2 Nights_Domestic   \"ETS(… 1.26e8   -225.  460.  464.  465. 9.61e7 1.00e8  7311.\n```\n\n\n:::\n\n```{.r .cell-code}\ncomponents(fit) |> autoplot() + theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](forecasting-caravan-visitors_files/figure-html/forecast-1.png){width=672}\n:::\n\n```{.r .cell-code}\nfit |>\n  forecast(h = 12) |>\n  autoplot(tourism_fc, level = 80) +\n  ggtitle(\"Total Visitor Nights in NSW Forecast\") +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](forecasting-caravan-visitors_files/figure-html/forecast-2.png){width=672}\n:::\n:::\n\n\n\nFollowing the overall forecast, the underlying data for caravan and camping tourism in NSW is examined. The script cleans and filters the tourist nights data to isolate records specific to caravan parks and commercial camping grounds in New South Wales. This refined dataset is then presented in an interactive table, allowing for easier exploration of the specific figures.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# trim whitespace from Metric column\ntr_nights$Metric <- trimws(tr_nights$Metric)\n\ntr_nights_nsw <- tr_nights |>\n  filter(Region == \"New South Wales\", Metric %in% \n    c(\"Caravan park or commercial camping ground\",\"Caravan or camping - non commercial\")\n  )\n\n# widen printed output\noptions(width = 250)\ndatatable(tr_nights_nsw  |>\n    mutate(across(where(is.numeric), round, 0)), rownames = FALSE, options = list(scrollX = TRUE))\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-150af89e815084a87352\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-150af89e815084a87352\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"New South Wales\",\"New South Wales\"],[\"Caravan park or commercial camping ground\",\"Caravan or camping - non commercial\"],[[436.919],[330.199]],[[366.963],[196.502]],[[11602.82],[6243.402]],[[12514.974],[6021.841]]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th>Region<\\/th>\\n      <th>Metric<\\/th>\\n      <th>International Year ending March 2020<\\/th>\\n      <th>International Year ending March 2024<\\/th>\\n      <th>Domestic overnight Year ending March 2020<\\/th>\\n      <th>Domestic overnight Year ending March 2024<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"columnDefs\":[{\"name\":\"Region\",\"targets\":0},{\"name\":\"Metric\",\"targets\":1},{\"name\":\"International Year ending March 2020\",\"targets\":2},{\"name\":\"International Year ending March 2024\",\"targets\":3},{\"name\":\"Domestic overnight Year ending March 2020\",\"targets\":4},{\"name\":\"Domestic overnight Year ending March 2024\",\"targets\":5}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n### Monthly Seasonal Decomposition\n\nTo understand intra-year dynamics, the analysis then focuses on monthly patterns.\nAverage 12 month rolling average of the NSW Occupancy Rate shows a stable trend from\nMay 2022 onwards.\n\nThe NSW Occupancy Rate data is prepared for time series analysis, and a rolling average is calculated and plotted. This helps to visualize and understand the underlying trend in occupancy rates over time, smoothing out short-term fluctuations.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# convert to tsibble\nor_monthly_df$index <- yearmonth(or_monthly_df$Month)\nor_monthly_nsw <- or_monthly_df |>\n  as_tsibble(index = index) |>\n  select(`NSW Occupancy Rate`)\n\n# plot rolling 12 month average\nor_monthly_nsw |>\n  mutate(roll_avg = slider::slide_dbl(\n    `NSW Occupancy Rate`, mean, .before = 6, .after = 5, .complete=TRUE)) |>\n  mutate(roll_avg_2 = slider::slide_dbl(roll_avg, mean, .after = 1, .complete=TRUE)) |>\n  autoplot(.vars=roll_avg_2) + ggtitle(\"NSW Occupancy Rate Rolling 12 Month Avg\")\n```\n\n::: {.cell-output-display}\n![](forecasting-caravan-visitors_files/figure-html/12 month avg-1.png){width=960}\n:::\n:::\n\n\n\nTo further investigate cyclical variations, the monthly occupancy rate time series is formally decomposed. This process separates the data into its constituent parts: the underlying trend, regular seasonal patterns, and the remaining irregular component. Visualizing these components helps in clearly identifying the seasonality.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nor_monthly_nsw <- or_monthly_nsw |>\n  filter(index > yearmonth(\"2022-06\"))\n\n# seasonal decomposition\ndecomp <- or_monthly_nsw |>\n  model(STL(`NSW Occupancy Rate`, robust = TRUE)) |>\n  components()\n\ndecomp |> autoplot()\n```\n\n::: {.cell-output-display}\n![](forecasting-caravan-visitors_files/figure-html/seasonal decomposition-1.png){width=960}\n:::\n:::\n\n\n\nNow we apply the seasonal component to the ETS forecast.\n\nThe seasonal pattern identified from the decomposition of monthly occupancy rates is then integrated with the annual ETS forecast. This step translates the broader annual projections into more granular monthly forecasts, reflecting typical seasonal peaks and troughs in visitor nights. The resulting seasonally adjusted monthly forecast is plotted alongside the original data for comparison.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Extract and normalize the seasonal component\nseasonal_component <- decomp |>\n  select(index, season_year) |>\n  mutate(normalized_season = season_year / mean(season_year))\n\n# average seasonal component for each month\nseasonal_component <- seasonal_component |>\n  as_tibble() |>\n  group_by(month(index)) |>\n  summarise(normalized_season = mean(season_year)) |>\n  ungroup()\n\n# Generate future dates\nlast_date <- as.Date(max(or_monthly_nsw$index))\nfuture_dates <- yearmonth(seq.Date(from = last_date + months(1), by = \"month\", length.out = 12))\n\n# Forecast using the fit model\nforecast_fit <- fit |>\n  forecast(h = 12)\n\n# Expand each forecasted value to 12 monthly values and apply the normalized seasonal factors\nmonthly_forecast <- forecast_fit |>\n  as_tibble() |>\n  rowwise() |>\n  mutate(monthly_forecast = list(.mean * (1+seasonal_component$normalized_season))) |>\n  unnest(cols = c(monthly_forecast)) |>\n  mutate(Month = rep(month(future_dates), nrow(forecast_fit))) |>\n  # combine Year and Month columns\n  mutate(idx = yearmonth(paste(Year, Month, sep = \"-\"))) |>\n  # distinct on idx\n  # distinct(idx, .keep_all = TRUE) |>\n  as_tsibble(index = idx, key = Type)\n\n# Plot the final forecast\nmonthly_forecast |>\n  autoplot(.vars=monthly_forecast) + ggtitle(\"NSW Occupancy Rate Forecast\") +\n  # add the original data\n  geom_line(\n    data = tourism_fc |> mutate(yrmo = make_yearmonth(year=Year, month=1)),\n    aes(x = yrmo, y = Nights, color = Type), size = 1) +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](forecasting-caravan-visitors_files/figure-html/extract seasonal comp-1.png){width=672}\n:::\n:::\n\n\n\nNot enough sample in each tourism region to determine avg stay, so will use NSW data instead.\n\nTo convert the forecast of visitor nights into an estimate of the average number of daily visitors, data on the average length of stay is incorporated. NSW-level averages for different visitor types (domestic and international) are used. By dividing the forecasted monthly visitor nights by the average stay duration, an estimate of the average daily visitor numbers is calculated. These daily visitor forecasts are then plotted and a sample is presented in a table.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nts_stay_nsw <- tr_stay |> filter(\n  Region == \"New South Wales\",\n  Metric %in% c(\"Caravan park or commercial camping ground\",\"Caravan or camping - non commercial\")\n  )\n\nint_avg <- (ts_stay_nsw$`International Year ending March 2024`[[1]] + \n  ts_stay_nsw$`International Year ending March 2024`[[2]]) / 2\n\ndom_avg <- (ts_stay_nsw$`Domestic overnight Year ending March 2024`[[1]] + \n  ts_stay_nsw$`Domestic overnight Year ending March 2024`[[2]]) / 2\n\n# join with monthly_forecast\nmonthly_forecast$avg_stay <- 0\nmonthly_forecast$avg_stay[monthly_forecast$Type == \"Nights_International\"] <- int_avg\nmonthly_forecast$avg_stay[monthly_forecast$Type == \"Nights_Domestic\"] <- dom_avg\n\n# calculate daily visitors\nmonthly_forecast$daily_visitors <- monthly_forecast$monthly_forecast / monthly_forecast$avg_stay\n#plot\nmonthly_forecast |>\n  autoplot(.vars=daily_visitors) + ggtitle(\"Daily Visitors Forecast\") +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](forecasting-caravan-visitors_files/figure-html/avg stay-1.png){width=672}\n:::\n\n```{.r .cell-code}\ndatatable(monthly_forecast |>\n    filter(Year == 2029) |>\n    as_tibble() |>\n    select(c(Year, Month, Type, monthly_forecast, daily_visitors)) |>\n    arrange(Year, Month, Type) |>\n    mutate(across(where(is.numeric), round, 0)))\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-f7374aeb16b5c3eb42f0\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-f7374aeb16b5c3eb42f0\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\"],[2029,2029,2029,2029,2029,2029,2029,2029,2029,2029,2029,2029,2029,2029,2029,2029,2029,2029,2029,2029,2029,2029,2029,2029],[1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12],[\"Nights_International\",\"Nights_Domestic\",\"Nights_International\",\"Nights_Domestic\",\"Nights_International\",\"Nights_Domestic\",\"Nights_International\",\"Nights_Domestic\",\"Nights_International\",\"Nights_Domestic\",\"Nights_International\",\"Nights_Domestic\",\"Nights_International\",\"Nights_Domestic\",\"Nights_International\",\"Nights_Domestic\",\"Nights_International\",\"Nights_Domestic\",\"Nights_International\",\"Nights_Domestic\",\"Nights_International\",\"Nights_Domestic\",\"Nights_International\",\"Nights_Domestic\"],[171172,111380,171675,111707,179037,116497,178343,116045,198427,129114,192825,125469,193209,125719,203499,132414,231944,150923,201872,131355,207558,135055,204939,133351],[24287,30595,24358,30684,25402,32000,25304,31876,28154,35466,27359,34465,27413,34533,28873,36373,32909,41457,28642,36082,29449,37098,29078,36630]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>Year<\\/th>\\n      <th>Month<\\/th>\\n      <th>Type<\\/th>\\n      <th>monthly_forecast<\\/th>\\n      <th>daily_visitors<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,2,4,5]},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"Year\",\"targets\":1},{\"name\":\"Month\",\"targets\":2},{\"name\":\"Type\",\"targets\":3},{\"name\":\"monthly_forecast\",\"targets\":4},{\"name\":\"daily_visitors\",\"targets\":5}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\nSummary:\n\n- Daily Visitors to Caravan/Campervan Sites peaks in September each year.\n- In 2029 we can expect an average of 65,000 daily visitors to Caravan/Campervan Sites in NSW.\n- This is composed of ~30,000 International visitors and ~35,000 Domestic visitors.\n- By 2040, the maximum monthly average number of daily visitors is expected to increase to 86,000\n(38,000 International and 48,000 Domestic visitors).\n\n## Per Caravan Site Forecast Methodology\n\nTo provide more localized insights, the NSW-level daily visitor forecast can be disaggregated to individual caravan sites. While the specific forecast outputs are not presented here due to data sensitivity, the methodology involves using historical trip ratios derived from sources like CompassIoT data.\n\nThe process begins by calculating site-specific trip ratios from historical data. This involves determining the proportion of total observed trips (e.g. vehicle trips to caravan park areas) that can be attributed to each individual caravan site over a defined baseline period.\n\nThese proportional ratios are then applied to the overall NSW daily visitor forecast (derived in the previous steps of this analysis). By multiplying the total NSW daily visitor numbers for a given period by each site's proportional trip ratio, an estimate of daily visitors for that specific site is obtained.\n\nThis disaggregation allows for a more localized understanding of tourism patterns. The resulting site-specific forecasts can then be prepared for various uses, including tabular analysis for operational planning and geospatial visualization by joining them with caravan site location data, which aids in regional resource management and infrastructure planning. This methodological approach enables the translation of broader regional forecasts into actionable, site-level insights.\n\n## Data Integration Process and Challenges\n\nThe integration of Compass IoT data, monthly visitation records, and TRA forecasts required addressing several technical challenges:\n\n- Compass IoT Data Characteristics: The dataset comprises telemetry information (location, speed, timestamp, acceleration) from over 64 vehicle manufacturers.\n- Export Constraints: Compass IoT’s CSV export is capped at 1,000 links per query, requiring a series of batched exports to obtain full trip datasets for all caravan park catchments.\n- Catchment Delineation: Iterative tuning of park-level catchment radii was performed to optimize inclusion of relevant trips while avoiding overlapping or misattributed traffic.\n- Through-Traffic Filtering: Only trips terminating or originating within designated catchment zones were retained, excluding pass-through movements not associated with park visitation.\n- Multi-Year Ratio Stability: Aggregated visitation ratios were validated across multiple years to ensure consistency and reliability before applying to forecast disaggregation.\n- Cross-Validation of Seasonality: Seasonal trends identified from STL decomposition were reconciled with monthly observed data to confirm alignment in peak periods and off-seasons.",
    "supporting": [
      "forecasting-caravan-visitors_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/datatables-binding-0.33/datatables.js\"></script>\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}